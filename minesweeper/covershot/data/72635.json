{"files":[{"filename":"minesweeper.js","coverage":95.65217391304348,"hits":66,"misses":3,"sloc":69,"source":{"1":{"line":"\"use strict\";","coverage":1},"2":{"line":"","coverage":""},"3":{"line":"if(exports === undefined || exports === null) {","coverage":1},"4":{"line":"  var exports = {};","coverage":0},"5":{"line":"}","coverage":""},"6":{"line":"","coverage":""},"7":{"line":"exports.Minesweeper = function() {","coverage":1},"8":{"line":"  this.SIZE = 10;","coverage":30},"9":{"line":"","coverage":""},"10":{"line":"  var STATE = {","coverage":30},"11":{"line":"    EXPOSED  : 0,","coverage":""},"12":{"line":"    FLAGGED  : 1","coverage":""},"13":{"line":"  };","coverage":""},"14":{"line":"","coverage":""},"15":{"line":"  var boardState = new Array(this.SIZE);","coverage":30},"16":{"line":"  var mined = new Array(this.SIZE);","coverage":30},"17":{"line":"  for (var row = 0, col = 0; row &lt; this.SIZE; ++row) {","coverage":30},"18":{"line":"    boardState[row] = new Array(this.SIZE);","coverage":300},"19":{"line":"    mined[row] = new Array(this.SIZE);","coverage":300},"20":{"line":"    for(col = 0; col &lt; this.SIZE; ++col) {","coverage":300},"21":{"line":"      boardState[row][col] = \"\";","coverage":3000},"22":{"line":"      mined[row][col] = false;","coverage":3000},"23":{"line":"    }","coverage":""},"24":{"line":"  }","coverage":""},"25":{"line":"","coverage":""},"26":{"line":"  this.isGameOver = function () {","coverage":30},"27":{"line":"    for (var i = 0; i &lt; this.SIZE; i++) {","coverage":103},"28":{"line":"      for (var j = 0; j &lt; this.SIZE; j++) {","coverage":1021},"29":{"line":"        if(mined[i][j] &amp;&amp; (boardState[i][j] === STATE.EXPOSED)) {","coverage":10201},"30":{"line":"          return true;","coverage":1},"31":{"line":"        }","coverage":""},"32":{"line":"      }","coverage":""},"33":{"line":"    }","coverage":""},"34":{"line":"    return false;","coverage":102},"35":{"line":"  };","coverage":""},"36":{"line":"","coverage":""},"37":{"line":"  this.isGameWon = function () {","coverage":30},"38":{"line":"    for (var i = 0; i &lt; this.SIZE; i++) {","coverage":10},"39":{"line":"      for (var j = 0; j &lt; this.SIZE; j++) {","coverage":28},"40":{"line":"        if((mined[i][j] &amp;&amp; boardState[i][j] !== STATE.FLAGGED) || (!mined[i][j] &amp;&amp; (boardState[i][j] !== STATE.EXPOSED))) {","coverage":210},"41":{"line":"          return false;","coverage":8},"42":{"line":"        }","coverage":""},"43":{"line":"      }","coverage":""},"44":{"line":"    }","coverage":""},"45":{"line":"    return true;","coverage":2},"46":{"line":"  };","coverage":""},"47":{"line":"","coverage":""},"48":{"line":"  this.exposeCell = function (row, col) {","coverage":30},"49":{"line":"    if(boardState[row][col] !== STATE.FLAGGED &amp;&amp; boardState[row][col] !== STATE.EXPOSED &amp;&amp;","coverage":5516},"50":{"line":"        (row &gt;= 0) &amp;&amp; (col &gt;= 0) &amp;&amp; (row &lt; this.SIZE) &amp;&amp; (col &lt; this.SIZE)) {","coverage":""},"51":{"line":"      boardState[row][col] = STATE.EXPOSED;","coverage":701},"52":{"line":"      return true;","coverage":701},"53":{"line":"    }","coverage":""},"54":{"line":"    return false;","coverage":4815},"55":{"line":"  };","coverage":""},"56":{"line":"","coverage":""},"57":{"line":"  this.exposeAdjacentUnminedCells = function (row, col) {","coverage":30},"58":{"line":"    for (var i = row - 1; i &lt;= row+1; i++) {","coverage":688},"59":{"line":"      for (var j = col - 1; j &lt;= col+1; j++) {","coverage":2064},"60":{"line":"        if((i &gt;= 0) &amp;&amp; (j &gt;= 0) &amp;&amp; (i &lt; this.SIZE) &amp;&amp; (j &lt; this.SIZE) &amp;&amp; !mined[i][j] &amp;&amp; this.exposeCell(i, j) &amp;&amp;","coverage":6192},"61":{"line":"           (this.findNumAdjacentMines(i,j) === 0)) {","coverage":""},"62":{"line":"          this.exposeAdjacentUnminedCells(i, j);","coverage":681},"63":{"line":"        }","coverage":""},"64":{"line":"      }","coverage":""},"65":{"line":"    }","coverage":""},"66":{"line":"    return true;","coverage":688},"67":{"line":"  };","coverage":""},"68":{"line":"","coverage":""},"69":{"line":"  this.findNumAdjacentMines = function (row, col) {","coverage":30},"70":{"line":"    var numMines = 0;","coverage":697},"71":{"line":"    for (var i = row - 1; i &lt;= row+1; i++) {","coverage":697},"72":{"line":"      for (var j = col - 1; j &lt;= col+1; j++) {","coverage":2091},"73":{"line":"        if((i &gt;= 0) &amp;&amp; (j &gt;= 0) &amp;&amp; (i &lt; this.SIZE) &amp;&amp; (j &lt; this.SIZE) &amp;&amp; mined[i][j]) {","coverage":6273},"74":{"line":"          ++numMines;","coverage":20},"75":{"line":"        }","coverage":""},"76":{"line":"      }","coverage":""},"77":{"line":"    }","coverage":""},"78":{"line":"    return numMines;","coverage":697},"79":{"line":"  };","coverage":""},"80":{"line":"","coverage":""},"81":{"line":"","coverage":""},"82":{"line":"  this.toggleFlagCell = function (row, col) {","coverage":30},"83":{"line":"    if((row &gt;= 0) &amp;&amp; (col &gt;= 0) &amp;&amp; (row &lt; this.SIZE) &amp;&amp;(col &lt; this.SIZE) &amp;&amp; (boardState[row][col] !== STATE.EXPOSED)) {","coverage":210},"84":{"line":"      boardState[row][col] === \"\" ? boardState[row][col] = STATE.FLAGGED : boardState[row][col] = \"\";","coverage":208},"85":{"line":"      return true;","coverage":208},"86":{"line":"    }","coverage":""},"87":{"line":"    return false;","coverage":2},"88":{"line":"  };","coverage":""},"89":{"line":"","coverage":""},"90":{"line":"  this.placeMine = function (row, col) {","coverage":30},"91":{"line":"    return mined[row][col] ? false : mined[row][col] = true;","coverage":27},"92":{"line":"  };","coverage":""},"93":{"line":"","coverage":""},"94":{"line":"  this.placeNumMines = function (minesToPlace) {","coverage":30},"95":{"line":"    for(var numMines = 0; numMines &lt; minesToPlace; numMines++) {","coverage":2},"96":{"line":"      var row = Math.floor(Math.random() * this.SIZE);","coverage":11},"97":{"line":"      var col = Math.floor(Math.random() * this.SIZE);","coverage":11},"98":{"line":"      if(!this.placeMine(row, col)) {","coverage":11},"99":{"line":"        numMines--;","coverage":1},"100":{"line":"      }","coverage":""},"101":{"line":"    }","coverage":""},"102":{"line":"    return numMines;","coverage":2},"103":{"line":"  };","coverage":""},"104":{"line":"","coverage":""},"105":{"line":"  this.getScore = function () {","coverage":30},"106":{"line":"    var score = 0;","coverage":1},"107":{"line":"    for (var i = 0; i &lt; this.SIZE; i++) {","coverage":1},"108":{"line":"      for (var j = 0; j &lt; this.SIZE; j++) {","coverage":10},"109":{"line":"        if(!this.isGameOver() &amp;&amp; (boardState[i][j] === STATE.EXPOSED)) {","coverage":100},"110":{"line":"          score++;","coverage":3},"111":{"line":"        }","coverage":""},"112":{"line":"      }","coverage":""},"113":{"line":"    }","coverage":""},"114":{"line":"    return score;","coverage":1},"115":{"line":"  };","coverage":""},"116":{"line":"","coverage":""},"117":{"line":"  this.getBoardState = function () {","coverage":30},"118":{"line":"    return boardState;","coverage":0},"119":{"line":"  };","coverage":""},"120":{"line":"","coverage":""},"121":{"line":"  this.getMinedPositions = function () {","coverage":30},"122":{"line":"    return mined;","coverage":0},"123":{"line":"  };","coverage":""},"124":{"line":"};","coverage":""}}}],"hits":66,"misses":3,"sloc":69,"instrumentation":"node-jscoverage","coverage":95.65217391304348}